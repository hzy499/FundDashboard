<view class="min-h-screen bg-[#f5f6f8] flex flex-col h-screen overflow-hidden">

  <view class="flex-none">
    <view class="relative z-10 px-4 pt-4">
      <view
        class="relative overflow-hidden bg-gradient-to-br from-[#2b6cb0] to-[#4299e1] text-white p-6 rounded-2xl shadow-xl shadow-blue-200/50">
        <view class="flex flex-col items-center mb-8 relative z-10">
          <view class="text-xs text-blue-100 mb-2 tracking-widest uppercase opacity-80">总资产 (元)</view>
          <view class="text-5xl font-bold tracking-tighter drop-shadow-sm font-nums">{{ totalAssets }}</view>
        </view>
      </view>
    </view>

    <view class="mx-4 mt-4 p-5 bg-white rounded-2xl shadow-sm border border-gray-50">
      <view class="w-full h-48">
        <ec-canvas id="mychart-dom-pie" canvas-id="mychart-pie" ec="{{ ec }}"></ec-canvas>
      </view>
    </view>

    <view class="px-5 mt-6 mb-2 text-sm font-bold text-gray-500">持仓列表 ({{ fundList.length || 0 }})</view>
  </view>

  <recycle-view class="flex-1" batch="{{batchSetRecycleData}}" id="recycleId" bindscrolltolower="loadMore">
    <recycle-item wx:for="{{recycleList}}" wx:key="code">
      <view
        class="bg-white rounded-2xl shadow-sm mx-4 mb-3 overflow-hidden active:scale-[0.98] transition-all duration-200 border border-gray-50"
        bindtap="onToDetail" data-code="{{item.code}}">
        <view class="px-4 py-3 flex justify-between items-center bg-gray-50/50 border-b border-gray-100">
          <view class="flex items-center gap-2 flex-1 overflow-hidden">
            <view
              class="text-[20rpx] px-1.5 py-0.5 rounded bg-blue-50 text-blue-600 font-medium border border-blue-100 shrink-0">
              {{item.type}}
            </view>
            <view class="font-bold text-sm text-gray-800 truncate">{{ item.name }}</view>
          </view>
          <van-icon name="arrow" color="#cbd5e1" size="14px" />
        </view>

        <view class="p-4 grid grid-cols-4 gap-2">
          <view class="flex flex-col items-center justify-center">
            <text class="text-[20rpx] text-gray-400 mb-1">当日涨幅</text>
            <text class="font-bold text-sm font-nums {{ item.isDailyGain ? 'text-[#ff4d4f]' : 'text-[#22c55e]' }}">
              {{ item.isDailyGain ? '+' : ''}}{{ item.dailyPercent }}%
            </text>
          </view>
        </view>
      </view>
    </recycle-item>

    <view slot="after" class="py-4 flex justify-center">
      <van-loading size="24px" wx:if="{{isLoading}}">加载中...</van-loading>
    </view>
  </recycle-view>

</view>