<view class="min-h-screen bg-[#f7f8fa] pb-10">

<view class="relative overflow-hidden bg-gradient-to-br from-[#1989fa] to-[#39b9f9] text-white pt-6 pb-12 px-6 rounded-b-3xl shadow-lg">
  <view class="flex flex-col items-center mb-6">
    <view class="text-sm opacity-80 mb-1">总资产 (元)</view>
    <view class="text-4xl font-bold tracking-wider">{{ totalAssets }}</view>
  </view>

  <view class="flex justify-between items-center px-4">
    <view class="text-center">
      <view class="text-xs opacity-70 mb-1">累计收益</view>
      <view class="text-xl font-bold {{ isGain ? 'text-red-100' : 'text-green-100' }}">
        {{ totalProfit }}
      </view>
    </view>
    <view class="h-8 w-[1px] bg-white opacity-20"></view> <view class="text-center">
      <view class="text-xs opacity-70 mb-1">持有收益率</view>
      <view class="text-xl font-bold">{{ totalReturnRate }}</view>
    </view>
  </view>

  <view class="absolute top-[-20rpx] right-[-20rpx] w-32 h-32 bg-white opacity-10 rounded-full"></view>
</view>

<view class="mx-3 -mt-6 mb-3 p-4 bg-white rounded-xl shadow-sm relative z-10">
  <view class="flex justify-between items-center mb-2 border-b border-gray-100 pb-2">
    <view class="text-sm font-bold text-gray-800 flex items-center">
      <view class="w-1 h-3 bg-[#1989fa] mr-2 rounded-full"></view>
      资产分布
    </view>
    <view class="text-[20rpx] text-gray-400 bg-gray-50 px-2 py-0.5 rounded-full flex items-center">
      <view class="w-1.5 h-1.5 bg-green-500 rounded-full mr-1 animate-pulse"></view>
      已更新 {{ fundList[0].updateTime }}
    </view>
  </view>
  <view class="w-full h-48">
    <ec-canvas id="mychart-dom-pie" canvas-id="mychart-pie" ec="{{ ec }}"></ec-canvas>
  </view>
</view>

<view class="px-3">
  <van-skeleton title row="3" loading="{{ isLoading }}">
    <block wx:for="{{ fundList }}" wx:key="code">
      <view 
        class="bg-white rounded-xl shadow-sm mb-3 overflow-hidden active:scale-98 transition-all duration-200"
        bindtap="onToDetail" 
        data-code="{{item.code}}"
      >
        <view class="p-3 flex justify-between items-center border-b border-gray-50">
          <view class="flex items-center gap-2">
             <view class="text-[20rpx] px-1.5 py-0.5 rounded bg-blue-50 text-blue-500 border border-blue-100">
               {{item.type}}
             </view>
             <view class="font-bold text-sm text-gray-800 truncate max-w-[400rpx]">{{ item.name }}</view>
          </view>
          <van-icon name="arrow" color="#969799" size="14px" />
        </view>

        <view class="p-3">
          <view class="flex justify-between items-center text-center">
            
            <view class="flex flex-col w-1/4">
              <text class="text-xs text-gray-400 mb-1">当日涨幅</text>
              <text class="text-sm font-bold {{ item.isDailyGain ? 'text-gain' : 'text-loss' }}">
                {{ item.isDailyGain ? '+' : ''}}{{ item.dailyPercent }}%
              </text>
            </view>

            <view class="flex flex-col w-1/4">
              <text class="text-xs text-gray-400 mb-1">当日收益</text>
              <text class="text-sm font-bold {{ item.isDailyGain ? 'text-gain' : 'text-loss' }}">
                {{ item.dailyProfit }}
              </text>
            </view>

            <view class="flex flex-col w-1/4 border-l border-gray-100 pl-2">
              <text class="text-xs text-gray-400 mb-1">持有收益</text>
              <text class="text-base font-bold {{ item.isGain ? 'text-gain' : 'text-loss' }}">
                {{ item.profit }}
              </text>
            </view>

            <view class="flex flex-col w-1/4">
              <text class="text-xs text-gray-400 mb-1">持有率</text>
              <text class="text-sm font-bold {{ item.isGain ? 'text-gain' : 'text-loss' }}">
                {{ item.returnRate }}%
              </text>
            </view>

          </view>
        </view>
        
      </view>
    </block>
  </van-skeleton>
</view>

<view class="h-10"></view>
</view>